<section id="sec-purchase" class="hidden animate-fade-in">
    <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6">
        <div>
            <h2 class="text-2xl font-bold text-gray-800 flex items-center gap-2">
                <i class="fas fa-file-invoice-dollar text-orange-600"></i>
                Gestão de Suprimentos
            </h2>
            <p class="text-sm text-gray-500">Controle de entrada de mercadorias e custos.</p>
        </div>
        <button onclick="Purchase.openNewOrderModal()"
            class="bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-xl shadow-sm flex items-center gap-2 transition-all">
            <i class="fas fa-plus"></i> Nova Ordem de Compra
        </button>
    </div>

    <div class="bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden">
        <table class="w-full text-left">
            <thead class="bg-gray-50 border-b border-gray-100">
                <tr class="text-[11px] font-black uppercase text-gray-400 tracking-widest">
                    <th class="p-4">ID / Data</th>
                    <th class="p-4">Fornecedor</th>
                    <th class="p-4">Loja Destino</th>
                    <th class="p-4">Valor Total</th>
                    <th class="p-4">Status</th>
                    <th class="p-4 text-center">Ações</th>
                </tr>
            </thead>
            <tbody id="purchase-orders-list" class="divide-y divide-gray-50">
            </tbody>
        </table>
    </div>
</section>

<div id="modal-new-order" class="fixed inset-0 bg-black/50 z-[100] hidden items-center justify-center backdrop-blur-sm">
    <div class="bg-white w-full max-w-md rounded-3xl p-6 shadow-2xl animate-scale-up">
        <h3 class="text-xl font-bold mb-4">Iniciar Ordem de Compra</h3>
        <div class="space-y-4">
            <div>
                <label class="block text-[10px] font-black text-gray-400 uppercase mb-1">Fornecedor</label>
                <select id="po-supplier-id"
                    class="w-full bg-gray-50 border border-gray-200 rounded-xl p-3 focus:ring-2 focus:ring-orange-500 outline-none">
                </select>
            </div>
            <div>
                <label class="block text-[10px] font-black text-gray-400 uppercase mb-1">Loja de Destino</label>
                <select id="po-store-id"
                    class="w-full bg-gray-50 border border-gray-200 rounded-xl p-3 focus:ring-2 focus:ring-orange-500 outline-none">
                </select>
            </div>
            <div class="flex gap-2 mt-6">
                <button onclick="UI.closeModal('modal-new-order')"
                    class="flex-1 py-3 text-gray-500 font-bold">Cancelar</button>
                <button onclick="Purchase.submitNewOrder()"
                    class="flex-1 py-3 bg-orange-600 text-white rounded-xl font-bold shadow-lg shadow-orange-200">Criar
                    Rascunho</button>
            </div>
        </div>
    </div>
</div>

<div id="modal-manage-items"
    class="fixed inset-0 bg-black/60 z-[110] hidden items-center justify-center backdrop-blur-md">
    <div
        class="bg-white w-full max-w-4xl max-h-[90vh] rounded-3xl overflow-hidden shadow-2xl flex flex-col animate-scale-up">
        <div class="p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50/50">
            <div>
                <h3 class="text-xl font-bold text-gray-800">Itens da Ordem #<span id="manage-po-id">--</span></h3>
                <p class="text-xs text-gray-500" id="manage-po-info">Fornecedor: -- | Loja: --</p>
            </div>
            <button onclick="UI.closeModal('modal-manage-items')" class="text-gray-400 hover:text-gray-600"><i
                    class="fas fa-times text-xl"></i></button>
        </div>

        <div class="flex-1 overflow-y-auto p-6 space-y-6">
            <div class="bg-orange-50 p-4 rounded-2xl border border-orange-100">
                <label class="block text-[10px] font-black text-orange-400 uppercase mb-2 tracking-widest">Adicionar
                    Produto</label>
                <div class="flex gap-3">
                    <div class="relative flex-1">
                        <i class="fas fa-search absolute left-3 top-3.5 text-orange-300"></i>
                        <input type="text" id="po-search-product" oninput="Purchase.searchProducts(this.value)"
                            placeholder="Buscar por Nome ou SKU..."
                            class="w-full pl-10 pr-4 py-3 bg-white border border-orange-200 rounded-xl outline-none focus:ring-2 focus:ring-orange-500 shadow-sm">
                        <div id="po-search-results"
                            class="absolute w-full mt-1 bg-white border border-gray-200 rounded-xl shadow-xl z-10 hidden">
                        </div>
                    </div>
                    <input type="number" id="po-add-qty" placeholder="Qtd"
                        class="w-24 p-3 border border-orange-200 rounded-xl outline-none focus:ring-2 focus:ring-orange-500">
                    <input type="number" id="po-add-cost" placeholder="Custo R$"
                        class="w-32 p-3 border border-orange-200 rounded-xl outline-none focus:ring-2 focus:ring-orange-500">
                    <button id="btn-add-po-item" disabled onclick="Purchase.addItem()"
                        class="bg-orange-600 text-white px-6 rounded-xl font-bold shadow-lg shadow-orange-200 disabled:opacity-50 transition-all">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
            </div>

            <div class="bg-white rounded-2xl border border-gray-100 overflow-hidden">
                <table class="w-full text-left">
                    <thead class="bg-gray-50 text-[10px] font-black uppercase text-gray-400">
                        <tr>
                            <th class="p-4">Produto</th>
                            <th class="p-4 text-center">Quantidade</th>
                            <th class="p-4 text-center">Custo Unit.</th>
                            <th class="p-4 text-center">Subtotal</th>
                            <th class="p-4 text-center">Ações</th>
                        </tr>
                    </thead>
                    <tbody id="po-items-table" class="divide-y divide-gray-50 text-sm">
                    </tbody>
                </table>
            </div>
        </div>

        <div class="p-6 bg-gray-50 border-t border-gray-100 flex justify-between items-center">
            <div class="text-gray-500">
                Total da Ordem: <span id="po-total-display" class="text-2xl font-black text-blue-600 ml-2">R$
                    0,00</span>
            </div>
            <button onclick="Purchase.finalizeDraft()"
                class="bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-2xl font-bold shadow-lg transition-all">
                Finalizar Rascunho & Enviar
            </button>
        </div>
    </div>
</div>